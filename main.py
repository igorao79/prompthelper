# -*- coding: utf-8 -*-

"""
–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ª–µ–Ω–¥–∏–Ω–≥–æ–≤
–í–µ—Ä—Å–∏—è 2.0 —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏:
- –ü–æ–∏—Å–∫ –≤ —Å–ø–∏—Å–∫–µ —Å—Ç—Ä–∞–Ω
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã
- –í—ã–±–æ—Ä –ø–∞–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è —Ç–µ–º–∞—Ç–∏–∫ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ä–∞–±–æ—á–µ–º—É —Å—Ç–æ–ª—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–∞–ø–æ–∫
"""

import sys
from shared.settings_manager import SettingsManager
from core.update_checker import UpdateChecker
from gui.qt_main import run_qt


def main():
    """–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: —Ç–æ–ª—å–∫–æ Qt-–≤–µ—Ä—Å–∏—è (PySide6)."""
    print("üöÄ –ó–∞–ø—É—Å–∫ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –õ–µ–Ω–¥–∏–Ω–≥–æ–≤ v2.0 (Qt)...")
    try:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–ª–æ–≥)
        try:
            sm = SettingsManager()
            info = UpdateChecker(sm).check()
            if info.available:
                print("üîî –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∏ linux (igorao79/prompthelper)")
            elif info.message:
                print(f"‚ÑπÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {info.message}")
        except Exception:
            pass

        run_qt()
        return 0
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: {e}")
        input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")
        return 1


if __name__ == "__main__":
    sys.exit(main())